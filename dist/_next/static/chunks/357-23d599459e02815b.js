"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{5357:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=a(3827),r=a(4090),l=a(7907),n=a(575),o=a(703);let d=e=>{let{handleLogout:t,handleQuery:a,loading:r,setMessages:l}=e;return(0,s.jsx)("div",{className:"flex flex-col gap-5",children:(0,s.jsxs)("div",{className:"flex flex-col h-full p-5 bg-slate-200",children:[(0,s.jsxs)("div",{className:"flex flex-col my-5",children:[(0,s.jsx)(o.default,{src:"/iter.png",alt:"Logo",className:"logo",width:120,height:120,quality:80}),(0,s.jsxs)("div",{className:"text-xs my-1",children:[(0,s.jsx)("span",{children:"For ITER Data"}),(0,s.jsx)("span",{className:"italic",children:" Active Queries"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 my-5",children:[(0,s.jsx)(n.z,{className:"flex gap-5 center h-12 w-full rounded-sm text-sm bg-indigo-700 hover:bg-indigo-800",onClick:()=>l([{text:"Hello! I'm your friendly chatbot assistant. How can I help you today? Whether you have questions, need information, or just want to chat, feel free to ask. I'm here to assist you with any information or tasks you have in mind. What can I do for you?",isBot:!0}]),children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.default,{src:"/add-30.png",alt:"",className:"addBtn",width:20,height:20}),(0,s.jsx)("p",{children:"New Chat"})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xs",children:"Try the following queries:"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(n.z,{className:"rounded-sm h-12 flex px-4",onClick:a,value:"What does ITER stand for?",disabled:r,children:(0,s.jsxs)("div",{className:"flex gap-2 align-middle justify-center",children:[(0,s.jsx)(o.default,{src:"message.svg",alt:"Query",className:"queryImg",width:15,height:15}),(0,s.jsx)("p",{className:"text-xs",children:"What does ITER stand for?"})]})}),(0,s.jsx)(n.z,{className:"rounded-sm h-12 flex px-6",onClick:a,value:"Provide an overview of ITER?",disabled:r,children:(0,s.jsxs)("div",{className:"flex gap-2 align-middle justify-center",children:[(0,s.jsx)(o.default,{src:"message.svg",alt:"Query",className:"queryImg",width:15,height:15}),(0,s.jsx)("p",{className:"text-xs",children:"Provide an overview of ITER?"})]})})]})]})]}),(0,s.jsx)(n.z,{className:"flex center h-12 w-full rounded-sm text-sm bg-red-700 hover:bg-red-800",onClick:t,children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.default,{src:"logout.svg",alt:"logout",className:"listItemsImg-logout",width:20,height:20}),(0,s.jsx)("p",{children:"Logout"})]})})]})]})})};var i=a(2782),c=a(895),u=a(2169);let h=c.zt,f=c.fC,m=c.xz,x=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(c.VY,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});x.displayName=c.VY.displayName;var g=e=>{let{input:t,setInput:a,handleSend:r,messages:l,msgEnd:d,handleEnter:c,loading:u,setLoading:g}=e;return(0,s.jsxs)("div",{className:"px-8 flex flex-col gap-1 pt-10",children:[(0,s.jsxs)("div",{className:"flex flex-col h-full gap-4 overflow-scroll no-scrollbar",children:[l.map((e,t)=>(0,s.jsxs)("div",{className:e.isBot?"chat chat-start":"chat chat-end",children:[(0,s.jsx)("div",{className:"chat-image avatar",children:(0,s.jsx)("div",{className:"w-10 rounded-full",children:e.isBot?(0,s.jsx)(o.default,{src:"chatgptLogo.svg",alt:"logo",width:20,height:20,quality:90}):(0,s.jsx)("div",{className:"avatar placeholder",children:(0,s.jsx)("div",{className:"bg-orange-300 rounded-full w-10 border border-orange-500",children:(0,s.jsx)("span",{className:"text-xl",children:"U"})})})})}),(0,s.jsxs)("p",{className:e.isBot?"chat-bubble flex flex-col gap-2":"chat-bubble chat-bubble-info",children:[e.text,e.isBot&&e.metadata?(0,s.jsx)("div",{className:"pb-1",children:(0,s.jsx)(h,{children:(0,s.jsxs)(f,{children:[(0,s.jsx)(m,{className:"text-xs text-slate-400 bg-slate-600 px-2 py-1 rounded-full",children:"metadata"}),(0,s.jsxs)(x,{side:"bottom",children:[(0,s.jsxs)("p",{children:["Doc ID: ",e.metadata.uid]}),(0,s.jsxs)("p",{children:["Title: ",e.metadata.title]}),(0,s.jsxs)("p",{children:["Reference: ",e.metadata.reference_text]}),(0,s.jsxs)("p",{children:["Author: ",e.metadata.author.uid]}),(0,s.jsxs)("p",{children:["Creation Date: ",new Date(e.metadata.creation_date).toLocaleString()]}),(0,s.jsxs)("p",{children:["Last Updated: ",new Date(e.metadata.lastChangeDate).toLocaleString()," by"," ",e.metadata.lastChangeUser.uid]})]})]})})}):null]})]},t)),(0,s.jsx)("div",{ref:d})]}),(0,s.jsx)("div",{className:"flex flex-col gap-4 pb-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.I,{className:"bg-slate-100 rounded-sm border border-slate-300",type:"text",placeholder:"Send a message",value:t,onKeyDown:c,disabled:u,onChange:e=>{a(e.target.value)}}),(0,s.jsx)(n.z,{className:"rounded-sm p-4",onClick:r,disabled:!t,children:(0,s.jsx)(o.default,{src:"send.svg",alt:"Send",width:30,height:30})})]})})]})},p=()=>{let e=(0,l.useRouter)(),t=(0,r.useRef)(null),[a,n]=(0,r.useState)(""),[o,i]=(0,r.useState)(!1),[c,u]=(0,r.useState)([{text:"Hello! I'm your friendly chatbot assistant. How can I help you today? Whether you have questions, need information, or just want to chat, feel free to ask. I'm here to assist you with any information or tasks you have in mind. What can I do for you?",isBot:!0,metadata:null}]);(0,r.useEffect)(()=>{t.current&&t.current.scrollIntoView()},[c]);let h=async()=>{if(o)return;i(!0),n("");let e=[...c,{text:a,isBot:!1,metadata:null}];u(e);let t=await fetch("https://poc-chatbot-iter-backend-ver1.azurewebsites.net/query_v1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,chat_history:c})});if(i(!1),t.ok){let a=await t.json();a.metadata.author=JSON.parse(a.metadata.author),a.metadata.lastChangeUser=JSON.parse(a.metadata.lastChangeUser),a.metadata.parent_content=JSON.parse(a.metadata.parent_content),u([...e,{text:a.result.split("\n")[0],isBot:!0,metadata:a.metadata}])}else u([...e,{text:"Sorry, an error occurred. Please try again later.",isBot:!0,metadata:null}])},f=async e=>{"Enter"===e.key&&a&&await h()},m=async e=>{if(o)return;i(!0);let t=e.target.innerText;u([...c,{text:t,isBot:!1,metadata:null}]);let a=await fetch("https://poc-chatbot-iter-backend-ver1.azurewebsites.net/query_v1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,chat_hystory:""})});if(i(!1),a.ok){let e=await a.json();e.metadata.author=JSON.parse(e.metadata.author),e.metadata.lastChangeUser=JSON.parse(e.metadata.lastChangeUser),e.metadata.parent_content=JSON.parse(e.metadata.parent_content),u([...c,{text:t,isBot:!1,metadata:e.metadata},{text:e.result.split("\n")[0],isBot:!0,metadata:e.metadata}])}else u([...c,{text:t,isBot:!1,metadata:null},{text:"Sorry, an error occurred. Please try again later.",isBot:!0,metadata:null}])};return(0,s.jsx)(s.Fragment,{children:"true"===localStorage.getItem("loggedIn")?(0,s.jsxs)("main",{className:"flex h-screen",children:[(0,s.jsx)(d,{handleQuery:m,handleLogout:()=>{localStorage.removeItem("loggedIn"),e.push("/login")},loading:o,setMessages:u}),(0,s.jsx)(g,{messages:c,input:a,setInput:n,handleSend:h,handleEnter:f,msgEnd:t,loading:o,setLoading:i})]}):e.push("/login")})}},575:function(e,t,a){a.d(t,{z:function(){return i}});var s=a(3827),r=a(4090),l=a(9143),n=a(7742),o=a(2169);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:i=!1,...c}=e,u=i?l.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(d({variant:r,size:n,className:a})),ref:t,...c})});i.displayName="Button"},2782:function(e,t,a){a.d(t,{I:function(){return n}});var s=a(3827),r=a(4090),l=a(2169);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},2169:function(e,t,a){a.d(t,{cn:function(){return l}});var s=a(3167),r=a(1367);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}}]);